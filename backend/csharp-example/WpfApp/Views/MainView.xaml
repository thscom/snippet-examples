<Window x:Class="WpfApp.Views.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:icons="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:local="clr-namespace:WpfApp.Views"
        mc:Ignorable="d"
        Title="MainView" Height="750" Width="1300"
        WindowStartupLocation="CenterScreen"
        FontFamily="Microsoft Sans Serif"
        Foreground="#333"
        Background="#f7f9fa">
    <WindowChrome.WindowChrome>
        <!-- 隐藏边框 -->
        <WindowChrome NonClientFrameEdges="None" UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>
    <Window.Resources>        
        
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition />
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Path Data="M0, 0 L0,45
              L166,45A10 10 0 0 0 175 41
              L186,10A15 10 0 0 1 200 5
              L880,5 880,0 z" StrokeThickness="1" Stretch="UniformToFill">
            <Path.Fill>
                <RadialGradientBrush RadiusX="0.6" RadiusY="1.8" Center="0.5,1.8" GradientOrigin="0.5,1.5">
                    <GradientStop Color="#409efe" Offset="0"/>
                    <GradientStop Color="#3269de" Offset="1" />
                </RadialGradientBrush>
            </Path.Fill>
            <Path.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Direction="270" Color="Black" Opacity="0.2" />
            </Path.Effect>
        </Path>

        <!--<Image Source="pack://Application:,,,/WpfApp.Assets;component/Images/icon.jpeg" 
               Width="30" Height="30" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0"/>-->
        <icons:PackIconFontAwesome Kind="HouseChimneySolid" Foreground="White" Width="30" Height="30" VerticalAlignment="Center" Margin="10,0,0,0"/>
        <TextBlock Text="MES System" Foreground="White" FontWeight="Bold"
                   VerticalAlignment="Center" HorizontalAlignment="Left" Margin="55,0,0,0" FontSize="28" />
        <StackPanel Orientation="Horizontal" Margin="300,0,0,0" VerticalAlignment="Center">
            <icons:PackIconFontAwesome Kind="BarsSolid" Width="30" Height="30" Foreground="#3269de"/>
            <TextBlock VerticalAlignment="Center" Margin="10,0" Foreground="#886590c1" FontSize="20">
                <Run Text="MES" />
                <Run Text="/" />
                <Run Text="Home" Foreground="#ff6590c1" />
            </TextBlock>
        </StackPanel>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="10,0">
            <Button Style="{StaticResource ControlButtonStyle}" Click="Minimum_Button_Click">
                <icons:PackIconFontAwesome Kind="MinusSolid" />
            </Button>
            <Button Style="{StaticResource ControlButtonStyle}" Click="Maximum_Button_Click">
                <icons:PackIconFontAwesome Kind="ExpandSolid" />
            </Button>
            <Button Style="{StaticResource ControlButtonStyle}" Click="Exit_Button_Click" >
                <icons:PackIconFontAwesome Kind="XSolid" />
            </Button>
        </StackPanel>
        
        <!-- Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="60" />
                <ColumnDefinition Width="180" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Border Background="#223269de" />
            <Border Background="#093269de" Grid.Column="1" BorderThickness="0,0,1,0" BorderBrush="White" />

            <!-- Menu -->
            <ListBox ItemsSource="{Binding MenuList}" Background="Transparent" BorderThickness="0" SelectedIndex="0" Name="menu_list">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Foreground" Value="#888" />                        
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListBoxItem">
                                    <Border Background="Transparent" Padding="0, 10" Name="border">
                                        <ContentPresenter />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="#3269de" TargetName="border"/>
                                            <Setter Property="Foreground" Value="White" />
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#223269de" TargetName="border"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                                
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <icons:PackIconFontAwesome Kind="{Binding Icon}" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding Header}" Grid.Row="1" HorizontalAlignment="Center" />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            
            <!-- Sub Menu -->
            <ItemsControl ItemsSource="{Binding ElementName=menu_list,Path=SelectedItem.SubMenus}" Grid.Column="1" Padding="0,10">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <RadioButton Content="{Binding Name}" GroupName="SubMenuItem"  
                                     Style="{StaticResource SubMenuButtonStyle}"
                                     Command="{Binding DataContext.OpenViewCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                     CommandParameter="{Binding}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            
            <!-- Main -->
            <ContentControl Grid.Column="2"
                xmlns:p="http://prismlibrary.com/"
                            p:RegionManager.RegionName="MainRegion">
                
            </ContentControl>
            
        </Grid>
    </Grid>
</Window>
